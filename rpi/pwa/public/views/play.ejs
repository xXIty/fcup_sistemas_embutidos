<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="/manifest.json">
    <title>cm-chessboard</title>
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0"/>
    <link rel="stylesheet" href="/assets/styles/cm-chessboard.css"/>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
</head>
<body>
<%- include('header') %>
<h2>Current Game</h2>

<script src="/js/bootstrap.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script type="module" src="/js/play.js"> </script>
<script>
function sendPromoPiece(piece) {
    $.ajax({
            type: 'post',
            url: '/game/promotion',
            data: JSON.stringify({piece: piece}),
            contentType: "application/json; charset=utf-8",
            traditional: true,
            success: function (data) {
                console.log(data)
            }
        });
    return 0;
}
</script>

<div id="board"></div>
<button class="btn btn-dark" id="but-prev" ><i class="bi bi-arrow-left"></i></button>
<button class="btn btn-dark" id="but-next" ><i class="bi bi-arrow-right"></i></button>

<!-- Modal -->
<div class="modal fade" id="promoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="promoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" >
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Choose</h5>
                <!--<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
            </div>
            <div class="modal-body">
                <div id="wchoose" class="row">
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('q')">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#wq" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('r');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#wr" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('b');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#wb" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('n');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#wn" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="bchoose" class="row">
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('q');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#bq" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('r');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#br" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('b');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#bb" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="col-3">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="sendPromoPiece('n');">
                            <svg class="" style="width: 45px; height: 45px; overflow: hidden;">
                                <use xlink:href="/assets/images/chessboard-sprite-staunty.svg#bn" class="piece"></use>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
            <!--<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
            <!--<button type="submit" class="btn btn-danger">Delete</button> -->
            </div>
        </div>
    </div>
</div>


</body>
</html>
